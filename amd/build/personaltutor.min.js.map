{"version":3,"file":"personaltutor.min.js","sources":["../src/personaltutor.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\nrequire.config({\n    paths: {\n        'datatables.net': M.cfg.wwwroot + '/report/myfeedback/vendor/js/jquery.dataTables',\n        'datatables.net-buttons': M.cfg.wwwroot + '/report/myfeedback/vendor/js/dataTables.buttons',\n        'datatables.net-colreorder': M.cfg.wwwroot + '/report/myfeedback/vendor/js/dataTables.colReorder',\n        'datatables.net-fixedheader': M.cfg.wwwroot + '/report/myfeedback/vendor/js/dataTables.fixedHeader',\n        'datatables.net-responsive': M.cfg.wwwroot + '/report/myfeedback/vendor/js/dataTables.responsive',\n    },\n});\n\ndefine([\n    'jquery',\n    'core/str',\n    'datatables.net',\n    'datatables.net-buttons',\n    'datatables.net-colreorder',\n    'datatables.net-fixedheader',\n    'datatables.net-responsive',\n], function($, str) {\n\n    return {\n        init: function() {\n            $(document).ready(function() {\n\n                $('#tutortable').DataTable({\n                    'dom': 'lfBrtip',\n                    fixedHeader: true,\n                    'order': [1, 'asc'],\n                    'columnDefs': [\n                        {'orderable': false, 'targets': 0}],\n                    buttons: ['colvis'],\n                    responsive: true\n                });\n\n                $('#selectall').change(function() {\n                    $('.chk1').prop('checked', $(this).prop('checked'));\n                });\n                $(\"#emailform\").click(function() {\n                    var mylink = [];\n                    $(\"input:checked\").each(function() {\n                        if ($(this).val() !== 'on') {\n                            mylink.push($(this).val());\n                        }\n                    });\n                    if (mylink.length > 0) {\n                        str.get_string('email_tutee_subject', 'report_myfeedback').then((emailTuteeSubject) => {\n                            return $(\"a#mail\").\n                            attr(\"href\", \"mailto:?bcc=\" + mylink.join(\";\") + \"&Subject=\" + emailTuteeSubject + \"\");\n                            // eslint-disable-next-line no-console\n                        }).catch(failure => console.log(failure));\n                    }\n                });\n\n                $('.reportPrint').on('click', function() {\n                    print();\n                });\n\n                $('.ex_port').on('click', function() {\n                    window.location.href = 'export.php';\n                });\n\n                $('.tutorCanvas').click(function() {\n                    var thisEl = $(this).closest('tr.recordRow ').find('table.accord');\n                    if ($(thisEl).is(':visible')) {\n                        $(this).closest('.recordRow').find('table.accord').hide();\n                        $(this).closest('.recordRow').find('.tangle').text('\\u25bc');\n                    } else if ($(thisEl).is(':hidden')) {\n                        $(this).closest('.recordRow').find('table.accord').show();\n                        $(this).closest('.recordRow').find('.tangle').text('\\u25b2');\n                    }\n                });\n            });\n        }\n    };\n});\n"],"names":["require","config","paths","M","cfg","wwwroot","define","$","str","init","document","ready","DataTable","fixedHeader","buttons","responsive","change","prop","this","click","mylink","each","val","push","length","get_string","then","emailTuteeSubject","attr","join","catch","failure","console","log","on","print","window","location","href","thisEl","closest","find","is","hide","text","show"],"mappings":"AAeAA,QAAQC,OAAO,CACXC,MAAO,kBACeC,EAAEC,IAAIC,QAAU,0EACRF,EAAEC,IAAIC,QAAU,8EACbF,EAAEC,IAAIC,QAAU,kFACfF,EAAEC,IAAIC,QAAU,kFACjBF,EAAEC,IAAIC,QAAU,wDAIrDC,yCAAO,CACH,SACA,WACA,iBACA,yBACA,4BACA,6BACA,8BACD,SAASC,EAAGC,WAEJ,CACHC,KAAM,WACFF,EAAEG,UAAUC,OAAM,WAEdJ,EAAE,eAAeK,UAAU,KAChB,UACPC,aAAa,QACJ,CAAC,EAAG,kBACC,CACV,YAAc,UAAkB,IACpCC,QAAS,CAAC,UACVC,YAAY,IAGhBR,EAAE,cAAcS,QAAO,WACnBT,EAAE,SAASU,KAAK,UAAWV,EAAEW,MAAMD,KAAK,eAE5CV,EAAE,cAAcY,OAAM,eACdC,OAAS,GACbb,EAAE,iBAAiBc,MAAK,WACE,OAAlBd,EAAEW,MAAMI,OACRF,OAAOG,KAAKhB,EAAEW,MAAMI,UAGxBF,OAAOI,OAAS,GAChBhB,IAAIiB,WAAW,sBAAuB,qBAAqBC,MAAMC,mBACtDpB,EAAE,UACTqB,KAAK,OAAQ,eAAiBR,OAAOS,KAAK,KAAO,YAAcF,qBAEhEG,OAAMC,SAAWC,QAAQC,IAAIF,cAIxCxB,EAAE,gBAAgB2B,GAAG,SAAS,WAC1BC,WAGJ5B,EAAE,YAAY2B,GAAG,SAAS,WACtBE,OAAOC,SAASC,KAAO,gBAG3B/B,EAAE,gBAAgBY,OAAM,eAChBoB,OAAShC,EAAEW,MAAMsB,QAAQ,iBAAiBC,KAAK,gBAC/ClC,EAAEgC,QAAQG,GAAG,aACbnC,EAAEW,MAAMsB,QAAQ,cAAcC,KAAK,gBAAgBE,OACnDpC,EAAEW,MAAMsB,QAAQ,cAAcC,KAAK,WAAWG,KAAK,MAC5CrC,EAAEgC,QAAQG,GAAG,aACpBnC,EAAEW,MAAMsB,QAAQ,cAAcC,KAAK,gBAAgBI,OACnDtC,EAAEW,MAAMsB,QAAQ,cAAcC,KAAK,WAAWG,KAAK"}